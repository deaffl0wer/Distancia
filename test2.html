<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Galerie Filtrable</title>
  <style>
    body {
      margin: 0;
      padding: 40px 20px;
      font-family: "Segoe UI", "Helvetica Neue", sans-serif;
      background: linear-gradient(to bottom, #fdfdfd, #f0f4f8);
      color: #333;
    }

    h1 {
      text-align: center;
      font-size: 2.8em;
      margin-bottom: 20px;
      color: #2c3e50;
    }

    .filters {
      text-align: center;
      margin-bottom: 40px;
    }

    .filters button {
      background-color: #3498db;
      border: none;
      color: white;
      padding: 10px 18px;
      margin: 5px;
      border-radius: 20px;
      cursor: pointer;
      transition: background 0.3s ease;
    }

    .filters button:hover {
      background-color: #2980b9;
    }

    .filters button.active {
      background-color: #2ecc71;
    }

    .year-group {
      margin-bottom: 60px;
      max-width: 1300px;
      margin-left: auto;
      margin-right: auto;
    }

    .year-group h2 {
      font-size: 1.8em;
      color: #444;
      margin-bottom: 15px;
      border-left: 5px solid #3498db;
      padding-left: 12px;
    }

    .photo-grid {
      column-count: 6;
      column-gap: 12px;
    }

    @media (max-width: 1200px) {
      .photo-grid { column-count: 4; }
    }

    @media (max-width: 800px) {
      .photo-grid { column-count: 2; }
    }

    @media (max-width: 500px) {
      .photo-grid { column-count: 1; }
    }

    .photo {
      width: 100%;
      margin-bottom: 12px;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      transition: transform 0.25s ease, box-shadow 0.25s ease;
      break-inside: avoid;
      display: block;
      cursor: pointer;
    }

    .photo:hover {
      transform: scale(1.025);
      box-shadow: 0 6px 16px rgba(0,0,0,0.15);
    }

    /* MODALE */
    .modal-overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: rgba(0,0,0,0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 999;
    }

    .modal {
      background: white;
      padding: 30px 20px;
      border-radius: 10px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.3);
      max-width: 400px;
      width: 80%;
      position: relative;
      text-align: center;
      animation: fadeIn 0.3s ease;
    }

    .modal .close-btn {
      position: absolute;
      top: 10px;
      right: 15px;
      font-size: 1.2em;
      background: none;
      border: none;
      cursor: pointer;
      color: #888;
    }

    .modal .close-btn:hover {
      color: #000;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.9); }
      to { opacity: 1; transform: scale(1); }
    }

    .hidden {
      display: none !important;
    }
  </style>
</head>
<body>

  <h1>Galerie de Souvenirs</h1>

  <div class="filters">
    <button data-tag="all" class="active">Tout afficher</button>
    <button data-tag="√©t√©">√ât√©</button>
    <button data-tag="automne">Automne</button>
    <button data-tag="hiver">Hiver</button>
    <button data-tag="printemps">Printemps</button>
  </div>

  <div id="galerie"></div>

  <script>
    const photos = [
      { src: "photo1.jpg", date: "2024-01-14", tags: ["hiver"], message: "Souvenir de janvier ‚ùÑÔ∏è" },
      { src: "photo2.jpg", date: "2023-08-10", tags: ["√©t√©"] },
      { src: "photo3.jpg", date: "2024-03-22", tags: ["printemps"], message: "Notre promenade en mars üåº" },
      { src: "photo4.jpg", date: "2023-10-05", tags: ["automne"] },
      { src: "photo5.jpg", date: "2024-07-15", tags: ["√©t√©"], message: "Un jour de soleil parfait ‚òÄÔ∏è" }
    ];

    const grouped = {};
    photos.forEach(p => {
      const year = new Date(p.date).getFullYear();
      if (!grouped[year]) grouped[year] = [];
      grouped[year].push(p);
    });

    const years = Object.keys(grouped).map(Number).sort((a,b) => b - a);
    const galerie = document.getElementById("galerie");

    years.forEach(year => {
      const section = document.createElement("section");
      section.classList.add("year-group");

      const h2 = document.createElement("h2");
      h2.textContent = year;
      section.appendChild(h2);

      const grid = document.createElement("div");
      grid.classList.add("photo-grid");

      grouped[year].forEach(photo => {
        const img = document.createElement("img");
        img.src = `/images/Mur de Souvenirs/${photo.src}`;
        img.alt = `Souvenir ${year}`;
        img.classList.add("photo");
        img.dataset.tags = photo.tags.join(',');

        if (photo.message) {
          img.addEventListener("click", () => showModal(photo.message));
        }

        grid.appendChild(img);
      });

      section.appendChild(grid);
      galerie.appendChild(section);
    });

    // POP-UP
    function showModal(message) {
      const overlay = document.createElement("div");
      overlay.classList.add("modal-overlay");

      const modal = document.createElement("div");
      modal.classList.add("modal");

      const close = document.createElement("button");
      close.classList.add("close-btn");
      close.innerHTML = "&times;";
      close.addEventListener("click", () => document.body.removeChild(overlay));

      const text = document.createElement("p");
      text.textContent = message;

      modal.appendChild(close);
      modal.appendChild(text);
      overlay.appendChild(modal);
      document.body.appendChild(overlay);
    }

    // FILTRAGE
    const buttons = document.querySelectorAll(".filters button");
    buttons.forEach(button => {
      button.addEventListener("click", () => {
        const tag = button.dataset.tag;
        buttons.forEach(b => b.classList.remove("active"));
        button.classList.add("active");

        const allPhotos = document.querySelectorAll(".photo");
        allPhotos.forEach(photo => {
          const tags = photo.dataset.tags.split(",");
          if (tag === "all" || tags.includes(tag)) {
            photo.classList.remove("hidden");
          } else {
            photo.classList.add("hidden");
          }
        });
      });
    });
  </script>

</body>
</html>
